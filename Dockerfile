FROM node:latest
ENV PARSE_DASHBOARD_ALLOW_INSECURE_HTTP true
# ENV PARSE_DASHBOARD_TRUST_PROXY 1
# ENV PARSE_DASHBOARD_SSL_KEY MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCuWN2TSrWgqcnkemR1ZEXvFFzO3/WBWEFMqkwBMXhL7Y88fzcfeQLy2pwBKWz3DpQynjg/ysOfVUsGqwOX4dbTL/nrbyGC+WPmrK4Ze2Wv7ttu6UBEktxcZ/GJ0BE2RHHXMfcWSnMMgSE2O8Th+D9/RrhnVvnBMZnHySTszQSsBWksQxrdzSmr/TC0RrIDIwYSdwpaQwz28yMz8HkQ02Bx3F4UVIApNiyK7mcSXwrHlq9MCtjmDzbpt5fKjg1W/DjaTdCXBnzv0r0NFxchvkr3XFWM9zP5Bs/FoWB5yVDsDJNVDgQ8drgOpwxMO9GGz4VFPmv0v5ZnIEsI8r4nk8EhAgMBAAECggEAd8uZ3AYejJl9nt82Pa87mk4Mgx1BzLE+lRYCiWNbfBhsLi5fSuHUU9hAD1BOjedXjvxGPBbvmYB6v8cr/eVwvcWeXNYMWblQmoSWT+4I7f0ai7f7r+KVRW0qev4bhYU8D5hGZeub58CmeGRTIM15m9OVC3SowcV6G9uq4obwqd0fYBEm1H2vl/bd8tcUl6fQd555S75UAi/41slEzf3SnooM5RO4u82qNgEZVodz96qZRYVFYMq3ay+L7RP3/fMrkv1vgEXBwfYTGaYvJBrt9jAWq1A9Fbu4UShmX5Pt80WhH4pxKVBOz1ZarWX+3rNALV6XapzlT6NR/MzGTdNgUQKBgQDbeMThkvUQXSV2EPTHGCzYo+jeZ11kBdkVd0xUF617a4W0UxPHWScFSFzUK/wS33a9wHtuIo/PZWycoUYN4Cq1Znwn+sDOhsRDc2bQHAJ5hRrtAi9UmVdV2OhfnqmQwRyY+ZWN9BvuXe+52j+dQcNyh0iFD09vvvd6sKRmcsV2HQKBgQDLXW5S0eYrLvtCuIfMH7LlJpEfZp3qv4R+RbSMQxPY2HIUSmHZbhxMA+g45FL6u0Lt4K8VOipOCBZ60FLJn0nvbo9xZk8Yblgyh0SFHK2FIuGybWsbzKxVCpIEukB1gAnEt/ewD3ZjP8WV55BKXnJqL0wn0rohRp5naTnRuxV31QKBgQCY22NcrKrsa8OkmKizZf4OIRMWm61q9bu9fKp3w0n7tOaZsmcLJ+fKgRzOVZgqWONtw3r0OTQqQbzE1nphPajhUPDWM4pIDYryY5TPC0MZ+f/H5QasCGTQkNM/jdUR0b4mOWbVSJiPi3Nk4UH/OAd1ZA25RvGPpdTd6duG0xb+bQKBgQCBSFk9X2DirRBgnyz9UF2LHdR+UN8tgCk7mRapYG86mIcVbR/9eOmWTZmQqV4zNV7cGM1VQk/ooW2hD9TBhnkbNH8OSUsZLfT10lZ2BQAutjkjFDpWRux7d6fSR5F44TfUjltw2rOZbs4ueTKahKZZ6M2SN33Kb7l95kAym6uPLQKBgFKAxJ0QhD+R6xR37nx9PORw9UxMIgv3KMeQ/SdBfWtG4RJhPmshcugmwbz5Q69gHydgKkqh/J2NlNzXja51VOQK+joLq1SVZyehlVWgwWWSCk1KL+qY91H4HHPzHnCWKo7vsAyX1D5vaMogbivdJeDjVEU68TfzPN1Z7ZzG9Yvp
# ENV PARSE_DASHBOARD_SSL_CERT MIIFBTCCA+2gAwIBAgISA6VAB23/A3F83gQmfU7XevoEMA0GCSqGSIb3DQEBCwUAMEoxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MSMwIQYDVQQDExpMZXQncyBFbmNyeXB0IEF1dGhvcml0eSBYMzAeFw0xODAzMTEwNzMwMjFaFw0xODA2MDkwNzMwMjFaMBwxGjAYBgNVBAMTEWFkbWluLmJlY2hlZXIuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArljdk0q1oKnJ5HpkdWRF7xRczt/1gVhBTKpMATF4S+2PPH83H3kC8tqcASls9w6UMp44P8rDn1VLBqsDl+HW0y/5628hgvlj5qyuGXtlr+7bbulARJLcXGfxidARNkRx1zH3FkpzDIEhNjvE4fg/f0a4Z1b5wTGZx8kk7M0ErAVpLEMa3c0pq/0wtEayAyMGEncKWkMM9vMjM/B5ENNgcdxeFFSAKTYsiu5nEl8Kx5avTArY5g826beXyo4NVvw42k3QlwZ879K9DRcXIb5K91xVjPcz+QbPxaFgeclQ7AyTVQ4EPHa4DqcMTDvRhs+FRT5r9L+WZyBLCPK+J5PBIQIDAQABo4ICETCCAg0wDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBSAl6/cRmjAZsNlBk5h2hT7A6e7xTAfBgNVHSMEGDAWgBSoSmpjBH3duubRObemRWXv86jsoTBvBggrBgEFBQcBAQRjMGEwLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3NwLmludC14My5sZXRzZW5jcnlwdC5vcmcwLwYIKwYBBQUHMAKGI2h0dHA6Ly9jZXJ0LmludC14My5sZXRzZW5jcnlwdC5vcmcvMBwGA1UdEQQVMBOCEWFkbWluLmJlY2hlZXIuY29tMIH+BgNVHSAEgfYwgfMwCAYGZ4EMAQIBMIHmBgsrBgEEAYLfEwEBATCB1jAmBggrBgEFBQcCARYaaHR0cDovL2Nwcy5sZXRzZW5jcnlwdC5vcmcwgasGCCsGAQUFBwICMIGeDIGbVGhpcyBDZXJ0aWZpY2F0ZSBtYXkgb25seSBiZSByZWxpZWQgdXBvbiBieSBSZWx5aW5nIFBhcnRpZXMgYW5kIG9ubHkgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBDZXJ0aWZpY2F0ZSBQb2xpY3kgZm91bmQgYXQgaHR0cHM6Ly9sZXRzZW5jcnlwdC5vcmcvcmVwb3NpdG9yeS8wDQYJKoZIhvcNAQELBQADggEBAIOMO51sg0ksTheg1UpWNbt+UuGxGOIt/fjFU6RrEjJKMcpyfob+rJFXy1Am6jT1sj7VCgKVzXyIp2z06I1NU8ReKePbxqSPJCYfLK8pmFr1/x/IWFLJiPad9UnPCVGZ1bFE+ZHsDZDq1RfgOulK4toF3X94hkSuGW1Ec03DcW7n0Jk7KCDlqHFURMxD3lSzcANEXlTd+PdeULYJkZFlZFeOsxCV5zcWwIs0hGDczppnuLQaz7WD2gTJCAZJTpU/Dfm4TdUhcVh5z5jGaPruJMeNc8vxZ//O0+7gIzaU3kHx2HfWyKzDglQU+iHNb3pWqxY9+YTg64qYFjLnhiaRn3U=
WORKDIR /src
ADD . /src
RUN npm config set registry https://registry.npm.taobao.org
RUN npm install

# RUN cd /src \
#  && npm install \
#  && npm run build \
#  && npm cache clear \
#  && rm -rf ~/.npm \
#  && rm -rf /var/lib/apt/lists/*
ENTRYPOINT ["npm", "run", "dashboard"]
